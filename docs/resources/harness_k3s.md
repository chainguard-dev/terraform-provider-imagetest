---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "imagetest_harness_k3s Resource - terraform-provider-imagetest"
subcategory: ""
description: |-
  A harness that runs steps in a sandbox container networked to a running k3s cluster.
---

# imagetest_harness_k3s (Resource)

A harness that runs steps in a sandbox container networked to a running k3s cluster.



<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `inventory` (Attributes) The inventory this harness belongs to. This is received as a direct input from a data.imagetest_inventory data source. (see [below for nested schema](#nestedatt--inventory))
- `name` (String) The name of the harness. This must be unique within the scope of the provided inventory.

### Optional

- `disable_cni` (Boolean) When true, the builtin (flannel) CNI will be disabled.
- `disable_metrics_server` (Boolean) When true, the builtin metrics server will be disabled.
- `disable_traefik` (Boolean) When true, the builtin traefik ingress controller will be disabled.
- `image` (String) The full image reference to use for the k3s container.
- `networks` (Attributes Map) A map of existing networks to attach the harness containers to. (see [below for nested schema](#nestedatt--networks))
- `registries` (Attributes Map) A map of registries containing configuration for optional auth, tls, and mirror configuration. (see [below for nested schema](#nestedatt--registries))
- `sandbox` (Attributes) A map of configuration for the sandbox container. (see [below for nested schema](#nestedatt--sandbox))
- `timeouts` (Attributes) (see [below for nested schema](#nestedatt--timeouts))

### Read-Only

- `id` (String) The unique identifier for the harness. This is generated from the inventory seed and harness name.
- `skipped` (Boolean) Whether or not to skip creating the harness based on runtime inputs and the dependent features within this inventory.

<a id="nestedatt--inventory"></a>
### Nested Schema for `inventory`

Required:

- `seed` (String)


<a id="nestedatt--networks"></a>
### Nested Schema for `networks`

Required:

- `name` (String) The name of the existing network to attach the harness containers to.


<a id="nestedatt--registries"></a>
### Nested Schema for `registries`

Optional:

- `auth` (Attributes) (see [below for nested schema](#nestedatt--registries--auth))
- `mirror` (Attributes) (see [below for nested schema](#nestedatt--registries--mirror))
- `tls` (Attributes) (see [below for nested schema](#nestedatt--registries--tls))

<a id="nestedatt--registries--auth"></a>
### Nested Schema for `registries.auth`

Optional:

- `auth` (String)
- `password` (String, Sensitive)
- `username` (String)


<a id="nestedatt--registries--mirror"></a>
### Nested Schema for `registries.mirror`

Optional:

- `endpoints` (List of String)


<a id="nestedatt--registries--tls"></a>
### Nested Schema for `registries.tls`

Optional:

- `ca_file` (String)
- `cert_file` (String)
- `key_file` (String)



<a id="nestedatt--sandbox"></a>
### Nested Schema for `sandbox`

Optional:

- `envs` (Map of String) Environment variables to set on the container.
- `image` (String) The full image reference to use for the container.
- `mounts` (Attributes List) The list of mounts to create on the container. (see [below for nested schema](#nestedatt--sandbox--mounts))
- `networks` (Attributes Map) A map of existing networks to attach the container to. (see [below for nested schema](#nestedatt--sandbox--networks))
- `privileged` (Boolean)
- `volumes` (Attributes List) The volumes this harness should mount. This is received as a mapping from imagetest_container_volume resources to destination folders. (see [below for nested schema](#nestedatt--sandbox--volumes))

<a id="nestedatt--sandbox--mounts"></a>
### Nested Schema for `sandbox.mounts`

Required:

- `destination` (String) The absolute path on the container to mount the source directory.
- `source` (String) The relative or absolute path on the host to the source directory to mount.


<a id="nestedatt--sandbox--networks"></a>
### Nested Schema for `sandbox.networks`

Required:

- `name` (String) The name of the existing network to attach the container to.


<a id="nestedatt--sandbox--volumes"></a>
### Nested Schema for `sandbox.volumes`

Required:

- `destination` (String)
- `source` (Attributes) (see [below for nested schema](#nestedatt--sandbox--volumes--source))

<a id="nestedatt--sandbox--volumes--source"></a>
### Nested Schema for `sandbox.volumes.source`

Required:

- `id` (String)
- `inventory` (Attributes) (see [below for nested schema](#nestedatt--sandbox--volumes--source--inventory))
- `name` (String)

<a id="nestedatt--sandbox--volumes--source--inventory"></a>
### Nested Schema for `sandbox.volumes.source.name`

Required:

- `seed` (String)





<a id="nestedatt--timeouts"></a>
### Nested Schema for `timeouts`

Optional:

- `create` (String) The maximum time to wait for the k3s harness to be created.
