---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "imagetest_tests Resource - terraform-provider-imagetest"
subcategory: ""
description: |-
  
---

# imagetest_tests (Resource)





<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `driver` (String) The driver to use for the test suite. Only one driver can be used at a time.
- `images` (Map of String) Images to use for the test suite.

### Optional

- `drivers` (Attributes) The resource specific driver configuration. This is merged with the provider scoped drivers configuration. (see [below for nested schema](#nestedatt--drivers))
- `labels` (Map of String) Metadata to attach to the tests resource. Used for filtering and grouping.
- `name` (String) The name of the test. If one is not provided, a random name will be generated.
- `repo` (String) The target repository the provider will use for pushing/pulling dynamically built images, overriding provider config.
- `skipped` (Boolean) Whether or not the tests were skipped. This is set to true if the tests were skipped, and false otherwise.
- `tests` (Attributes List) An ordered list of test suites to run (see [below for nested schema](#nestedatt--tests))
- `timeout` (String) The maximum amount of time to wait for all tests to complete. This includes the time it takes to start and destroy the driver.

### Read-Only

- `id` (String) The unique identifier for the test. If a name is provided, this will be the name appended with a random suffix.

<a id="nestedatt--drivers"></a>
### Nested Schema for `drivers`

Optional:

- `aks` (Attributes) The AKS driver (see [below for nested schema](#nestedatt--drivers--aks))
- `docker_in_docker` (Attributes) The docker_in_docker driver (see [below for nested schema](#nestedatt--drivers--docker_in_docker))
- `ec2` (Attributes) The AWS EC2 driver. (see [below for nested schema](#nestedatt--drivers--ec2))
- `eks_with_eksctl` (Attributes) The eks_with_eksctl driver (see [below for nested schema](#nestedatt--drivers--eks_with_eksctl))
- `k3s_in_docker` (Attributes) The k3s_in_docker driver (see [below for nested schema](#nestedatt--drivers--k3s_in_docker))

<a id="nestedatt--drivers--aks"></a>
### Nested Schema for `drivers.aks`

Optional:

- `attached_acrs` (Attributes List) Attached ACRs, granting image pull rights (see [below for nested schema](#nestedatt--drivers--aks--attached_acrs))
- `cluster_identity_associations` (Attributes List) Cluster Identity Associations for the AKS driver (see [below for nested schema](#nestedatt--drivers--aks--cluster_identity_associations))
- `dns_prefix` (String) The DNS prefix of the AKS cluster (uses the cluster name by default)
- `kubernetes_version` (String) The Kubernetes version to deploy, uses the Azure default if unspecified
- `location` (String) The Azure region for the AKS driver (default is westeurope)
- `node_count` (Number) The number of nodes to use for the AKS driver (default is 1)
- `node_disk_size` (Number) Use a custom VM disk size (GB) instead of the one defined by the VM size
- `node_disk_type` (String) Ephemeral or Managed. Defaults to 'Ephemeral', which provide better performance but aren't persistent.
- `node_pool_name` (String) The node pool name to use for the AKS driver
- `node_resource_group` (String) The Azure resource group to hold AKS node resources
- `node_vm_size` (String) The node size to use for the AKS driver (default is Standard_DS2_v2)
- `pod_identity_associations` (Attributes List) Pod Identity Associations for the AKS driver (see [below for nested schema](#nestedatt--drivers--aks--pod_identity_associations))
- `resource_group` (String) The Azure resource group for the AKS driver
- `subscription_id` (String) The Azure subscription ID for the AKS driver, defaults to AZURE_SUBSCRIPTION_ID env var
- `tags` (Map of String) Additional tags to apply to all AKS resources created by the driver. Auto-generated tags (imagetest, imagetest:test-name, imagetest:cluster-name) are always included.

<a id="nestedatt--drivers--aks--attached_acrs"></a>
### Nested Schema for `drivers.aks.attached_acrs`

Optional:

- `create_if_missing` (Boolean) Whether to create the ACR if missing
- `name` (String)
- `resource_group` (String) The ACR resource group, defaults to the AKS resource group


<a id="nestedatt--drivers--aks--cluster_identity_associations"></a>
### Nested Schema for `drivers.aks.cluster_identity_associations`

Optional:

- `identity_name` (String) Name of the cluster identity (e.g. kubeletidentity)
- `role_assignments` (Attributes List) AKS roles to assign (see [below for nested schema](#nestedatt--drivers--aks--cluster_identity_associations--role_assignments))

<a id="nestedatt--drivers--aks--cluster_identity_associations--role_assignments"></a>
### Nested Schema for `drivers.aks.cluster_identity_associations.role_assignments`

Optional:

- `role_definition_id` (String) The role to assign. Example: /subscriptions/<sub-id>/providers/Microsoft.Authorization/roleDefinitions/<role-guid>
- `scope` (String) The role assignment scope. Example: /subscriptions/<sub-id>/resourceGroups/<rg>/providers/Microsoft.KeyVault/vaults/<kv-name>



<a id="nestedatt--drivers--aks--pod_identity_associations"></a>
### Nested Schema for `drivers.aks.pod_identity_associations`

Optional:

- `namespace` (String) Kubernetes namespace of the service account
- `role_assignments` (Attributes List) AKS roles to assign (see [below for nested schema](#nestedatt--drivers--aks--pod_identity_associations--role_assignments))
- `service_account_name` (String) Name of the Kubernetes service account

<a id="nestedatt--drivers--aks--pod_identity_associations--role_assignments"></a>
### Nested Schema for `drivers.aks.pod_identity_associations.role_assignments`

Optional:

- `role_definition_id` (String) The role to assign. Example: /subscriptions/<sub-id>/providers/Microsoft.Authorization/roleDefinitions/<role-guid>
- `scope` (String) The role assignment scope. Example: /subscriptions/<sub-id>/resourceGroups/<rg>/providers/Microsoft.KeyVault/vaults/<kv-name>




<a id="nestedatt--drivers--docker_in_docker"></a>
### Nested Schema for `drivers.docker_in_docker`

Optional:

- `image` (String) The image reference to use for the docker-in-docker driver
- `mirrors` (List of String)


<a id="nestedatt--drivers--ec2"></a>
### Nested Schema for `drivers.ec2`

Optional:

- `ami` (String) The AMI ID to launch. Required unless using existing_instance.
- `device_mounts` (List of String) Device mounts for the test container (format: src:dst).
- `env` (Map of String) Environment variables for setup commands and container.
- `existing_instance` (Attributes) Use an existing instance instead of creating new resources. (see [below for nested schema](#nestedatt--drivers--ec2--existing_instance))
- `gpus` (String) GPUs to mount in the test container. Use 'all' for all GPUs, or a number like '1' or '2'.
- `instance_profile_name` (String) IAM instance profile name. If not specified, one is created with ECR read-only permissions.
- `instance_type` (String) The EC2 instance type (default: t3.medium).
- `mount_all_gpus` (Boolean, Deprecated) Deprecated: use gpus = 'all' instead.
- `region` (String) The AWS region (default: us-west-2).
- `root_volume_size` (Number) Root volume size in GB (default: 50).
- `setup_commands` (List of String) Commands to run on the instance before tests.
- `shell` (String) Shell to use for commands (default: bash).
- `ssh_port` (Number) SSH port for connecting to the instance (default: 22).
- `ssh_user` (String) SSH user for connecting to the instance (default: ubuntu).
- `subnet_cidr` (String) The CIDR block for the subnet. If not specified, an available /24 is auto-detected.
- `user_data` (String) Cloud-init user data (will be base64 encoded).
- `volume_mounts` (List of String) Volume mounts for the test container (format: src:dst).
- `vpc_id` (String) The VPC ID to create resources in. Required unless using existing_instance.

<a id="nestedatt--drivers--ec2--existing_instance"></a>
### Nested Schema for `drivers.ec2.existing_instance`

Required:

- `ip` (String) IP address of the existing instance.
- `ssh_key` (String) Path to the SSH private key file.



<a id="nestedatt--drivers--eks_with_eksctl"></a>
### Nested Schema for `drivers.eks_with_eksctl`

Optional:

- `aws_profile` (String) The AWS CLI profile to use for eksctl and AWS CLI commands
- `node_ami` (String) The AMI to use for the eks_with_eksctl driver (default is the latest EKS optimized AMI)
- `node_count` (Number) The number of nodes to use for the eks_with_eksctl driver (default is 1)
- `node_type` (String) The instance type to use for the eks_with_eksctl driver (default is m5.large)
- `pod_identity_associations` (Attributes List) Pod Identity Associations for the EKS driver (see [below for nested schema](#nestedatt--drivers--eks_with_eksctl--pod_identity_associations))
- `region` (String) The AWS region to use for the eks_with_eksctl driver (default is us-west-2)
- `storage` (Attributes) Storage configuration for the eks_with_eksctl driver (see [below for nested schema](#nestedatt--drivers--eks_with_eksctl--storage))
- `tags` (Map of String) Additional tags to apply to all AWS resources created by the driver. Auto-generated tags (imagetest, imagetest:test-name, imagetest:cluster-name) are always included.

<a id="nestedatt--drivers--eks_with_eksctl--pod_identity_associations"></a>
### Nested Schema for `drivers.eks_with_eksctl.pod_identity_associations`

Optional:

- `namespace` (String) Kubernetes namespace of the service account
- `permission_policy_arn` (String) ARN of the permission policy
- `service_account_name` (String) Name of the Kubernetes service account


<a id="nestedatt--drivers--eks_with_eksctl--storage"></a>
### Nested Schema for `drivers.eks_with_eksctl.storage`

Optional:

- `size` (String) The size of the storage volume (e.g., '20Gi')
- `type` (String) The type of storage to use (e.g., 'gp2', 'gp3')



<a id="nestedatt--drivers--k3s_in_docker"></a>
### Nested Schema for `drivers.k3s_in_docker`

Optional:

- `cni` (Boolean) Enable the CNI plugin
- `hooks` (Attributes) Run commands at various lifecycle events (see [below for nested schema](#nestedatt--drivers--k3s_in_docker--hooks))
- `image` (String) The image reference to use for the k3s_in_docker driver
- `metrics_server` (Boolean) Enable the metrics server
- `network_policy` (Boolean) Enable the network policy
- `registries` (Attributes Map) A map of registries containing configuration for optional auth, tls, and mirror configuration. (see [below for nested schema](#nestedatt--drivers--k3s_in_docker--registries))
- `snapshotter` (String) The snapshotter to use for the k3s_in_docker driver
- `traefik` (Boolean) Enable the traefik ingress controller

<a id="nestedatt--drivers--k3s_in_docker--hooks"></a>
### Nested Schema for `drivers.k3s_in_docker.hooks`

Optional:

- `post_start` (List of String)


<a id="nestedatt--drivers--k3s_in_docker--registries"></a>
### Nested Schema for `drivers.k3s_in_docker.registries`

Optional:

- `mirrors` (Attributes) A map of registries containing configuration for optional auth, tls, and mirror configuration. (see [below for nested schema](#nestedatt--drivers--k3s_in_docker--registries--mirrors))

<a id="nestedatt--drivers--k3s_in_docker--registries--mirrors"></a>
### Nested Schema for `drivers.k3s_in_docker.registries.mirrors`

Optional:

- `endpoints` (List of String)





<a id="nestedatt--tests"></a>
### Nested Schema for `tests`

Required:

- `image` (String) The image reference to use as the base image for the test.
- `name` (String) The name of the test

Optional:

- `artifact` (Attributes) The bundled artifact generated by the test. (see [below for nested schema](#nestedatt--tests--artifact))
- `cmd` (String) When specified, will override the sandbox image's CMD (oci config).
- `content` (Attributes List) The content to use for the test (see [below for nested schema](#nestedatt--tests--content))
- `envs` (Map of String) Environment variables to set on the test container. These will overwrite the environment variables set in the image's config on conflicts.
- `timeout` (String) The maximum amount of time to wait for the individual test to complete. This is encompassed by the overall timeout of the parent tests resource.

<a id="nestedatt--tests--artifact"></a>
### Nested Schema for `tests.artifact`

Read-Only:

- `checksum` (String) The checksum of the artifact.
- `uri` (String) The URI of the artifact. The artifact is in targz format.


<a id="nestedatt--tests--content"></a>
### Nested Schema for `tests.content`

Required:

- `source` (String) The source path to use for the test

Optional:

- `target` (String) The target path to use for the test
